@{
    ViewBag.Title = "Candidates";
    var candidatesJson = ViewBag.CandidatesJson;
}

<h2>Candidates for Job</h2>

<table class="table">
    <thead>
        <tr>
            <th>No.</th>
            <th>Full Name</th>
            <th>Attachments</th>
            <th>Apply Date</th>
        </tr>
    </thead>
    <tbody id="candidatesTableBody">
        <!-- Rows will be populated here -->
    </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function () {
        var candidatesJson = '@Html.Raw(candidatesJson)';
        var candidates = JSON.parse(candidatesJson);

        var $tableBody = $('#candidatesTableBody');
        $tableBody.empty();

        $.each(candidates, function (index, candidate) {
            var $row = $('<tr></tr>');
            $row.append($('<td></td>').text(index + 1)); // Nomor urut
            $row.append($('<td></td>').text(candidate.AlumniName)); // Nama Alumni
            $row.append($('<td></td>').text(candidate.FileName));

            // Kolom Attachments
            //var $attachmentsCell = $('<td></td>');
            //if (candidate.Attachments && candidate.Attachments.length > 0) {
            //    $.each(candidate.Attachments, function (i, attachment) {
            //        var $attachmentLink = $('<a></a>')
            //            .attr('href', attachment.FilePath)
            //            .addClass('btn btn-link')
            //            .attr('target', '_blank') // Buka di tab baru
            //            .text(attachment.FileName);
            //        $attachmentsCell.append($attachmentLink).append('<br>'); // Pisahkan dengan line break
            //    });
            //} else {
            //    $attachmentsCell.text('No Attachments'); // Jika tidak ada file
            //}
            //$row.append($attachmentsCell);

            // Kolom Apply Date
            $row.append($('<td></td>').text(new Date(candidate.ApplyDate).toLocaleString()));

            $tableBody.append($row);
        });
    });
</script>
